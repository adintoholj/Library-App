<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
  xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
  xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
  xmlns:controls="clr-namespace:BibliothequariaFrontend.Controls"
  x:Class="BibliothequariaFrontend.Pages.Search"
  BackgroundColor="#4A4646"
  Shell.NavBarIsVisible="False"
  Padding="0">

    <Grid ColumnDefinitions="373, *">

        <!-- NAV BAR -->
        <Grid
      Grid.Column="0"
      BackgroundColor="#FDBF1D"
      RowDefinitions="100,*,60"
      Padding="20">

            <!-- Logo -->
            <Image
        Grid.Row="0"
        Source="bibliothequarialogo.png"
        HeightRequest="80"
        HorizontalOptions="Start"
        VerticalOptions="Center" />

            <!-- Nav items -->
            <StackLayout
        Grid.Row="1"
        Spacing="40"
        Padding="10,22,0,0">

                <!-- Dashboard -->
                <StackLayout Orientation="Horizontal" Spacing="15" VerticalOptions="Center" Margin="0,20,0,0">
                    <StackLayout.GestureRecognizers>
                        <TapGestureRecognizer Tapped="OnDashboardTapped" />
                    </StackLayout.GestureRecognizers>
                    <Image Source="dashboard.png" HeightRequest="24" WidthRequest="24" />
                    <Label
            Text="Dashboard"
            FontFamily="PoppinsBold"
            FontSize="18"
            TextColor="Black"
            VerticalOptions="Center" />
                </StackLayout>

                <!-- Member operations -->
                <StackLayout Orientation="Horizontal" Spacing="15" VerticalOptions="Center" Margin="0,5,0,0">
                    <StackLayout.GestureRecognizers>
                        <TapGestureRecognizer Tapped="OnMemberOperationsTapped" />
                    </StackLayout.GestureRecognizers>
                    <Image Source="memberoperations.png" HeightRequest="24" WidthRequest="24" />
                    <Label
            Text="Member operations"
            FontFamily="PoppinsBold"
            FontSize="18"
            TextColor="Black"
            VerticalOptions="Center" />
                </StackLayout>

                <!-- Book operations -->
                <StackLayout Orientation="Horizontal" Spacing="15" VerticalOptions="Center">
                    <StackLayout.GestureRecognizers>
                        <TapGestureRecognizer Tapped="OnBookOperationsTapped" />
                    </StackLayout.GestureRecognizers>
                    <Image Source="bookoperations.png" HeightRequest="24" WidthRequest="24" />
                    <Label
            Text="Book operations"
            FontFamily="PoppinsBold"
            FontSize="18"
            TextColor="Black"
            VerticalOptions="Center" />
                </StackLayout>

                <!-- Search (selected) -->
                <Frame
          BackgroundColor="#3A3428"
          CornerRadius="8"
          Padding="10"
          HasShadow="False"
          HorizontalOptions="Fill"
          Margin="-10,-10,10,-5">
                    <StackLayout Orientation="Horizontal" Spacing="15" VerticalOptions="Center">
                        <Image Source="searchoperations.png" HeightRequest="24" WidthRequest="24" />
                        <Label
              Text="Search"
              FontFamily="PoppinsBold"
              FontSize="18"
              TextColor="White"
              VerticalOptions="Center" />
                    </StackLayout>
                </Frame>

            </StackLayout>

            <!-- Row 2: Settings (tappable) -->
            <StackLayout
  Grid.Row="2"
  Orientation="Horizontal"
  Spacing="15"
  VerticalOptions="Center"
  Padding="10,0,0,0">
                <StackLayout.GestureRecognizers>
                    <TapGestureRecognizer Tapped="OnSettingsTapped" />
                </StackLayout.GestureRecognizers>
                <Image Source="settings.png" HeightRequest="24" WidthRequest="24" />
                <Label
    Text="Settings"
    FontFamily="PoppinsBold"
    FontSize="18"
    TextColor="Black"
    VerticalOptions="Center" />
            </StackLayout>

        </Grid>

        <!-- MAIN CONTENT -->
        <Grid
      Grid.Column="1"
      RowDefinitions="Auto,Auto,Auto,*,Auto"
      Padding="30">

            <!-- Header -->
            <Grid Grid.Row="0" ColumnDefinitions="*,Auto">
                <StackLayout Spacing="5">
                    <Label
            Text="Search"
            FontFamily="PoppinsBold"
            FontSize="24"
            TextColor="White" />
                    <Label
            Text="In this section, you can search books by title, author name, genre, date of release"
            FontFamily="PoppinsRegular"
            FontSize="16"
            TextColor="White"
            LineBreakMode="WordWrap" />
                </StackLayout>
                <Image
    Source="pfp.png"
    HeightRequest="50"
    WidthRequest="50"
    HorizontalOptions="End"
    VerticalOptions="Center">
                    <Image.GestureRecognizers>
                        <TapGestureRecognizer Tapped="OnAvatarTapped" />
                    </Image.GestureRecognizers>
                </Image>
            </Grid>

            <!-- Search bar -->
            <Grid ColumnDefinitions="*,Auto" Margin="0,8,0,12" Grid.Row="1">
                <Entry x:Name="SearchEntry"
           Placeholder="Text"
           Completed="OnSearchCompleted"
           BackgroundColor="#FDBF1D"
           TextColor="Black"
           FontFamily="PoppinsRegular" />
                <Button Grid.Column="1"
            Text="Search"
            Clicked="OnSearchClicked"
            BackgroundColor="#CFCFCF"
            TextColor="Black"
            CornerRadius="8"
            Padding="18,10"/>
            </Grid>

            <!-- Results card -->
            <Frame BackgroundColor="#DBCC99" CornerRadius="8" Padding="12" HasShadow="False" Grid.Row="3">
                <Grid RowDefinitions="Auto,*" RowSpacing="8">
                    <!-- Header row -->
                    <Grid Grid.Row="0" ColumnDefinitions="2*,*,*,Auto">
                        <Label Grid.Column="0" Text="Title"   FontFamily="PoppinsBold" TextColor="Black"/>
                        <Label Grid.Column="1" Text="Author"  FontFamily="PoppinsBold" TextColor="Black"/>
                        <Label Grid.Column="2" Text="Genre"   FontFamily="PoppinsBold" TextColor="Black"/>
                        <Label Grid.Column="3" Text="Availability"  FontFamily="PoppinsBold" TextColor="Black"/>
                    </Grid>

                    <!-- Live results -->
                    <CollectionView x:Name="ResultsList"
                        Grid.Row="1"
                        ItemsSource="{Binding Results}">
                        <CollectionView.EmptyView>
                            <Label Text="No results."
                       HorizontalOptions="Center"
                       VerticalOptions="Center"
                       TextColor="Black"
                       FontFamily="PoppinsRegular"/>
                        </CollectionView.EmptyView>
                        <CollectionView.ItemTemplate>
                            <DataTemplate>
                                <Grid ColumnDefinitions="2*,*,*,Auto" Padding="4,8">
                                    <Label Grid.Column="0" Text="{Binding Naslov}" TextColor="Black" FontFamily="PoppinsRegular"/>
                                    <Label Grid.Column="1" Text="{Binding Autor}"  TextColor="Black" FontFamily="PoppinsRegular"/>
                                    <Label Grid.Column="2" Text="{Binding Zanr}"   TextColor="Black" FontFamily="PoppinsRegular"/>
                                    <Label Grid.Column="3" Text="{Binding Availability}" TextColor="Black" FontFamily="PoppinsRegular"/>
                                </Grid>
                            </DataTemplate>
                        </CollectionView.ItemTemplate>
                    </CollectionView>
                </Grid>
            </Frame>

            <!-- later: your search results ListView / CollectionView -->
            

            <!-- bottom spacer if needed -->
            <BoxView Grid.Row="4" HeightRequest="20" Color="Transparent" />

        </Grid>
    </Grid>
</ContentPage>
